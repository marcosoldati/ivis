(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[19],{"/mzO":function(e,t,n){n.d(t,"a",(function(){return o}));var r=n("q1tI"),i=n("Ye/N"),a=n("n6mq");function o({commentsDisabled:e,onCommentChange:t,onPhotoChange:n,photosDisabled:o,isManagedView:s}){return r.createElement(a.c,null,r.createElement(a.j,null),r.createElement(a.c,{md:{display:"flex"},justifyContent:"between",paddingX:s?0:4,paddingY:s?6:3},!s&&r.createElement(a.c,{xs:{column:12},md:{column:3},paddingY:2},r.createElement(a.K,{size:"md"},i.a._("Comment and Photo Permissions"))),r.createElement(a.c,{xs:{column:12},md:{column:s?12:8}},r.createElement(a.c,{paddingY:1,display:"flex",alignItems:"center"},r.createElement(a.I,{onChange:t,id:"CommentSwitch",switched:!e}),r.createElement(a.c,{paddingX:2},r.createElement(a.q,{htmlFor:"CommentSwitch"},r.createElement(a.K,{size:"md"},i.a._("Allow people to comment","Label for toggling comments on a pin in pin edit form","Label for toggling comments on a pin in pin edit form"))))),r.createElement(a.c,{paddingY:1,alignItems:"center",display:"flex"},r.createElement(a.I,{onChange:n,id:"PhotoSwitch",switched:!o}),r.createElement(a.c,{paddingX:2},r.createElement(a.q,{htmlFor:"PhotoSwitch"},r.createElement(a.K,{size:"md"},i.a._("Allow people to upload photos","Label for toggling photos on a pin in pin edit form","Label for toggling photos on a pin in pin edit form"))))))))}},"0BOE":function(e,t,n){n.d(t,"a",(function(){return a}));const r={"á":"a","à":"a","â":"a","ä":"a","ã":"a","å":"a","æ":"a","ç":"c","é":"e","è":"e","ê":"e","ë":"e","í":"i","ì":"i","î":"i","ï":"i","ñ":"n","ó":"o","ò":"o","ô":"o","ö":"o","õ":"o","ø":"o","œ":"o","ß":"s","ú":"u","ù":"u","û":"u","ü":"u"},i=e=>{if(!e)return"";let t="";for(let n=0;n<e.length;n+=1)t+=r[e.charAt(n)]||e.charAt(n);return t},a=(e,t,n="name")=>{const r=t.toLowerCase();return e.filter(e=>((e,t)=>{const n=t.split(" "),r=e.split(" ");let a=0;for(let o=0;o<r.length;o+=1){(i(r[o]).includes(n[a])||r[o].includes(n[a]))&&(a+=1)}return a===n.length})(e[n].toLowerCase(),r))}},"2WXK":function(e,t,n){var r=n("q1tI");let i=null,a=!1,o=0;const s=()=>{i&&clearTimeout(i),a=!0,i=setTimeout(()=>{a=!1},100)};t.a=()=>{const[e,t]=Object(r.useState)(!1),n=Object(r.useRef)(null);Object(r.useEffect)(()=>(0===o&&window.addEventListener("scroll",s),o+=1,()=>{n.current&&clearTimeout(n.current),(o-=1)||window.removeEventListener("scroll",s)}),[]);const i=e=>{n.current&&clearTimeout(n.current),n.current=e&&a?setTimeout(()=>i(!0),100):setTimeout(()=>{t(e)},32)};return{isHovering:e,hoverHandlers:Object(r.useRef)({onMouseOver:()=>i(!0),onMouseLeave:()=>i(!1)}).current}}},"3z7j":function(e,t,n){n.d(t,"a",(function(){return i}));var r=n("Wer7");function i(e,t){return n=>n(Object(r.a)("BoardSectionResource",{field_set_key:t||"board_page",section_id:e}))}},"5FNA":function(e,t,n){n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var r=n("qtKf"),i=n("Pqnw"),a=n("Wer7");const o=["alphabetical","last_pinned_to","oldest","newest","group_boards_at_top","custom"],s={name:"BoardsResource",key:"boardsResource",options:({boardOrder:e,mixPublicSecret:t,username:n})=>({privacy_filter:"all",sort:e||"last_pinned_to",field_set_key:"profile_grid_item",username:n,page_size:25,group_by:t?"mix_public_private":"visibility",include_archived:!0,redux_normalize_feed:!0})},c=(e,t,n)=>({privacy_filter:t?"secret":"public",sort:n||"last_pinned_to",field_set_key:"profile_grid_item",username:e}),l=e=>o.reduce((t,n)=>{const o=[Object(i.a)("profileBoards",Object(r.c)(e,n))];return[!0,!1].forEach(t=>{o.push(Object(a.f)(s.name,s.options({username:e,boardOrder:n,mixPublicSecret:t})))}),t.concat(o)},[])},"5S2N":function(e,t,n){var r=n("q1tI"),i=n.n(r),a=n("/MKj"),o=n("VJm5"),s=n("rSLd"),c=n("xOLo"),l=n("BkRI"),d=n.n(l),u=n("/mzO"),h=n("kwau"),p=n("JW66"),m=n("eOdZ"),g=n("5FNA"),f=n("Wer7");var b=n("Sihc"),_=n("Y+p1"),E=n.n(_),y=n("Ye/N"),I=n("TiQD"),S=n("GBVV"),w=n("4cpq"),v=n("CvCA"),C=n("nGHF"),x=n("n6mq");function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const k=Object(C.c)(class extends i.a.PureComponent{constructor(...e){super(...e),O(this,"state",{deleting:!1}),O(this,"unmounted",!1),O(this,"handleConfirm",()=>{if(this.state.deleting)return;const{onDeletePin:e}=this.props;this.setState({deleting:!0}),e().then(()=>this.handleDeleteDidComplete()).catch(e=>this.handleDeleteDidComplete(e))}),O(this,"handleDeleteDidComplete",e=>{const{toastManagerContext:t}=this.props;this.unmounted||this.setState({deleting:!1}),e||t.showToast(({onHide:e})=>i.a.createElement(v.a,{onHide:e,text:y.a._("Pin deleted!","User deleted their pin","User deleted their pin")}))})}componentWillUnmount(){this.unmounted=!0}render(){const{onDismiss:e}=this.props,{deleting:t}=this.state;return i.a.createElement(I.b,{heading:y.a._("Are you sure?","Confirm the user wants to delete the pin","Confirm the user wants to delete the pin"),accessibilityModalLabel:y.a._("Are you sure you want to delete this pin?","Accessible label to confirm the user wants to delete the pin","Accessible label to confirm the user wants to delete the pin"),size:"sm",onDismiss:e,footer:i.a.createElement(x.c,{display:"flex",justifyContent:"end",marginStart:-1,marginEnd:-1},i.a.createElement(x.c,{paddingX:1},i.a.createElement(x.d,{onClick:e,text:y.a._("Cancel")})),i.a.createElement(x.c,{paddingX:1},i.a.createElement(w.a,{id:"confirm-delete-pin"},i.a.createElement(S.b,{color:"red",onClick:this.handleConfirm,text:y.a._("Delete Pin"),submitting:t}))))},i.a.createElement(x.c,{padding:4},i.a.createElement(x.K,null,y.a._("Once you delete a Pin, you can't undo it!"))))}});k.displayName="DeletePinConfirmation";var R=k,T=n("V711");function D({board:e,canEdit:t,onBoardChange:n,onBoardCreate:r}){return i.a.createElement(x.c,{md:{display:"flex"},justifyContent:"between",paddingX:4,paddingY:3},i.a.createElement(x.c,{xs:{column:12},md:{column:3},paddingY:2},i.a.createElement(x.q,{htmlFor:"BoardPicker"},i.a.createElement(x.K,{size:"md"},y.a._("Board")))),t?i.a.createElement(x.c,{xs:{column:12},md:{column:8}},i.a.createElement(T.a,{id:"BoardPicker",board:e,onBoardChosen:n,onBoardCreate:r})):i.a.createElement(x.c,{xs:{column:12},md:{column:8},paddingY:2},i.a.createElement(x.K,{size:"md",weight:"bold"},e.name)))}var B=n("Q7uW");function P({canEdit:e,description:t,errorMessage:n,label:i,placeholder:a,onDescriptionChange:o}){return r.createElement(r.Fragment,null,r.createElement(x.j,null),r.createElement(x.c,{md:{display:"flex"},justifyContent:"between",paddingX:4,paddingY:3},r.createElement(x.c,{xs:{column:12},md:{column:3},paddingY:2},r.createElement(x.q,{htmlFor:"DescriptionField"},r.createElement(x.K,{size:"md"},i))),e?r.createElement(x.c,{xs:{column:12},md:{column:8}},r.createElement(x.c,null,r.createElement(x.L,{id:"DescriptionField",placeholder:a,value:t,onChange:o,hasError:(n||"").length>0})),!!n&&r.createElement(x.c,{justifyContent:"center"},r.createElement(B.a,{errorMessage:n,htmlFor:"pin-edit-description"}))):r.createElement(x.c,{xs:{column:12},md:{column:8},paddingY:2},r.createElement(x.K,{size:"md",weight:"bold"},t))))}var M=n("NXrh");function N({board:e,canEdit:t,currentSection:n,onSectionChange:i,onSectionCreate:a,sectionId:o,sectionName:s}){const c=e.id?M.b:M.a;return r.createElement(x.c,{md:{display:"flex"},justifyContent:"between",paddingX:4,paddingY:3},r.createElement(x.c,{xs:{column:12},md:{column:3},paddingY:3},r.createElement(x.q,{htmlFor:"SectionPicker"},r.createElement(x.K,{size:"md"},y.a._("Section","label for editing a Pin's board section","label for editing a Pin's board section")))),t?r.createElement(x.c,{xs:{column:12},md:{column:8}},r.createElement(c,{board:e,onSectionChange:i,selectedSectionId:o,selectedSectionName:s,onSectionCreate:a})):r.createElement(x.c,{xs:{column:12},md:{column:8},paddingY:2},r.createElement(x.K,{size:"md",weight:"bold"},n&&!(e||{}).is_collaborative?n.title:y.a._("No section","default dropdown option for selecting a board section on pin edit","default dropdown option for selecting a board section on pin edit"))))}var L=n("X9vl"),A=n("a9HN"),j=n("xdpg");const U=6;function F({onClick:e,storyPinData:t}){const{pages:n}=t,i=n.length,a=i-U>1;return r.createElement(x.c,{md:{display:"flex"},justifyContent:"between",paddingX:4,paddingY:3},r.createElement(x.c,{xs:{column:12},md:{column:3},paddingY:2},r.createElement(x.K,{size:"md"},y.a._("Pages","editPinModal.EditStoryPinPages.header","Header text for editing Story Pin pages"))),r.createElement(x.c,{xs:{column:12},md:{column:8},display:"flex"},r.createElement(x.P,{onTouch:e,fullWidth:!1,rounding:2},r.createElement(x.c,{display:"flex"},n.slice(0,U).map((e,t)=>r.createElement(x.c,{marginEnd:2,key:`story-pin-page-${e.id}`},r.createElement(L.a,{index:t,key:`editStoryPageThumbnail-${t}`,pinItem:{...Object(A.b)(e)}}))),i>U&&r.createElement(x.c,{position:"relative"},r.createElement(L.a,{index:U,key:`editStoryPageThumbnail-${U}`,pinItem:{...Object(A.b)(n[U])}}),a&&r.createElement(x.c,{position:"absolute",color:"transparentDarkGray",top:!0,column:12,height:"100%",rounding:2,display:"flex",alignItems:"center",justifyContent:"center"},r.createElement(x.K,{color:"white",weight:"bold"},Object(j.i)(y.a._("+{{ pageCount }}","+N count, indeicating there are N more pages in Story Pin","+N count, indeicating there are N more pages in Story Pin"),{pageCount:i-U}))))))))}function H({canEdit:e,onTitleChange:t,title:n,errorMessage:i}){return r.createElement(r.Fragment,null,r.createElement(x.j,null),r.createElement(x.c,{md:{display:"flex"},justifyContent:"between",paddingX:4,paddingY:3},r.createElement(x.c,{xs:{column:12},md:{column:3},paddingY:2},r.createElement(x.q,{htmlFor:"TitleField"},r.createElement(x.K,{size:"md"},y.a._("Title","Label for editing title of pin","Label for editing title of pin")))),r.createElement(x.c,{xs:{column:12},md:{column:8}},e?r.createElement(r.Fragment,null,r.createElement(x.c,null,r.createElement(x.M,{hasError:(i||"").length>0,id:"TitleField",onChange:t,size:"lg",value:n})),!!i&&r.createElement(x.c,{justifyContent:"center"},r.createElement(B.a,{errorMessage:i,htmlFor:"pin-edit-title"}))):r.createElement(x.c,{xs:{column:12},md:{column:8},paddingY:2},r.createElement(x.K,{size:"md",weight:"bold"},n)))))}function q({onChangeWebsite:e,link:t,errorMessage:n}){return r.createElement(r.Fragment,null,r.createElement(x.j,null),r.createElement(x.c,{md:{display:"flex"},justifyContent:"between",paddingX:4,paddingY:3},r.createElement(x.c,{xs:{column:12},md:{column:3},paddingY:2},r.createElement(x.q,{htmlFor:"WebsiteField"},r.createElement(x.K,{size:"md"},y.a._("Website")))),r.createElement(x.c,{xs:{column:12},md:{column:8}},r.createElement(x.c,null,r.createElement(x.M,{hasError:(n||"").length>0,id:"WebsiteField",onChange:e,size:"lg",value:t})),!!n&&r.createElement(x.c,{justifyContent:"center"},r.createElement(B.a,{errorMessage:n,htmlFor:"pin-edit-website"})))))}var Y=n("TN0d"),z=n("Wrea"),V=n("ZVWG"),K=n("bo/h"),G=n("XCz/"),W=n("U4JR"),Q=n("NjDU"),X=n("zLLH"),$=n("C0mq");function J(e){return e?y.a._("Title too long. Make sure all cards' titles have less than 100 characters","Title entered is too long while editing a carousel pin and/or one of its pins","Title entered is too long while editing a carousel pin and/or one of its pins"):y.a._("Title too long. Make sure title has less than 100 characters","Title entered is too long while editing a pin","Title entered is too long while editing a pin")}function Z(e){return e?y.a._("Need to provide a valid URL. Make sure all cards' links are valid","Invalid URL/link provided while editing a carousel pin and/or one of its pins","Invalid URL/link provided while editing a carousel pin and/or one of its pins"):y.a._("Need to provide a valid URL. Make sure the link is valid","Invalid URL/link provided while editing a pin","Invalid URL/link provided while editing a pin")}var ee=n("fArA"),te=n("c50B"),ne=n("VqlB");function re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ie(e){return Boolean(e&&e.trim().length)}function ae(e,t){const n=ie(e),r=ie(t);return(n||r)&&e!==t}const oe=(e,t)=>({field_set_key:"detailed",id:e,preserve_component_state:t});t.a=Object(ee.compose)($.a,Object(X.c)({key:"pinResource",name:"PinResource",options:e=>oe(e.pinId,!0)}),Object(a.connect)((function(e,t){const{advertiser:n,viewer:r}=e;return r.isAuth&&n&&n.owner_user_id!==r.id?{advertiser_id:n.id}:{}}),e=>({invalidatePinResource:t=>e(Object(f.f)("PinResource",oe(t,!0))),changeBoardPinCount:t=>e(Object(z.d)(t)),changeUserPinCount:t=>e(Object(Q.b)(t)),completeResourceFetch:t=>e(Object(f.b)("PinResource",oe(t.id,!1),t)),pinMoved:Object(ee.bindActionCreators)(ne.b,e)})))(class extends r.Component{constructor(...e){super(...e),re(this,"state",{board:this.props.pinResource.data&&this.props.pinResource.data.board||null,commentsDisabled:this.props.pinResource.data&&this.props.pinResource.data.comments_disabled||!1,description:this.props.pinResource.data&&this.props.pinResource.data.description.trim()||"",apiErrorMessage:null,link:this.props.pinResource.data&&this.props.pinResource.data.link||"",photosDisabled:this.props.pinResource.data&&this.props.pinResource.data.did_it_disabled||!1,sectionId:this.props.pinResource.data&&this.props.pinResource.data.section&&this.props.pinResource.data.section.id||null,sectionName:this.props.pinResource.data&&this.props.pinResource.data.section&&this.props.pinResource.data.section.title||null,showDeleteConfirmation:!1,carousel_data:this.props.pinResource.data&&this.props.pinResource.data.carousel_data||null,title:this.props.pinResource.data&&this.props.pinResource.data.title||"",userNote:this.props.pinResource.data&&this.props.pinResource.data.unified_user_note&&this.props.pinResource.data.unified_user_note.trim()||"",isProcessing:!1,currentIndex:void 0!==this.props.carouselSlotCurrentIndex?this.props.carouselSlotCurrentIndex:this.props.pinResource.data&&this.props.pinResource.data.carousel_data&&this.props.pinResource.data.carousel_data.index||0,shouldApplyTextToAll:!1,shouldDisableSave:!1,shouldShowCarouselSliders:!1,shouldShowValidationTitleError:!1,shouldShowValidationDescriptionError:!1,shouldShowValidationLinkFormatError:!1,shouldShowGenericUpdateError:!1}),re(this,"onClickDeleteButton",()=>this.setState({showDeleteConfirmation:!0})),re(this,"onHideConfirmation",()=>this.setState({showDeleteConfirmation:!1})),re(this,"updateCarouselSlotIndex",()=>{const{carouselSlotCurrentIndex:e}=this.props;this.setState({currentIndex:void 0!==e?e:this.props.pinResource.data&&this.props.pinResource.data.carousel_data&&this.props.pinResource.data.carousel_data.index||0})}),re(this,"handleBoardChange",e=>{const{board:{id:t}}=this.state;e.id!==t&&this.setState({board:e,sectionId:null,sectionName:null})}),re(this,"createBoard",e=>{const{board:t}=this.state;if(!t.id&&t.name&&e){const{dispatch:n}=this.props;n(function(e,t){const n={name:e,privacy:p.a.BoardPrivacy.PUBLIC};return e=>m.a.create("BoardResource",n).callCreate().then(n=>{const r=n.resource_response.data;return e(t.username&&Object(f.f)("BoardsResource",Object(g.a)(t.username,!1))),r})}(t.name,e)).then(e=>{if(this._isMounted){const{sectionId:t,sectionName:n}=this.state;!t&&n?(this.setState({board:e}),this.createSection()):(this.handleBoardChange(e),this.handleSave())}})}}),re(this,"handleBoardCreateClick",e=>{if(!e)return;const t={name:e,privacy:p.a.BoardPrivacy.PUBLIC};this.setState({board:t,sectionId:null,sectionName:null})}),re(this,"createSection",()=>{const{board:e,sectionName:t}=this.state;if(!t)return;if(!e.id)return void this.createBoard();const n={boardId:e.id,name:t},{dispatch:r}=this.props;r(Object(b.a)(n)).then(e=>{this._isMounted&&(this.setState({sectionId:e&&e.id||null,sectionName:e&&e.title||null}),this.handleSave())}).catch(e=>{this.setState({shouldShowGenericUpdateError:!0,apiErrorMessage:e.message})})}),re(this,"handleSectionCreateClick",e=>{if(0===e.length)return;const{board:t}=this.state;t&&this.setState({sectionId:null,sectionName:e})}),re(this,"handleSectionChange",e=>this.setState({sectionId:e&&e.id||null,sectionName:e&&e.title||null,shouldShowGenericUpdateError:!1})),re(this,"handleDeletePin",()=>{const{pinResource:{data:e},pinId:t,onDelete:n,onHide:r,changeBoardPinCount:i,changeUserPinCount:a,advertiser_id:o}=this.props,s={...o?{advertiser_id:o}:{},id:t};return m.a.create("PinResource",s).callDelete().then(()=>{if(this._isMounted){if(!e)return;const{board:{id:o},pinner:{id:s},section:c}=e;i({boardId:o,sectionId:c&&c.id||void 0,increment:-1}),a({userId:s,increment:-1}),Y.a.instance.publish(o,"pinDeleted",t),Y.a.instance.publish(s,"pinDeleted"),Y.a.instance.publish(t,"pinDeleted"),r(),n&&n()}})}),re(this,"sanitizeCarouselData",e=>{let{carousel_data:t}=this.state;if(e&&(t=e),t){const{carousel_slots:e}=t;if(e){const t={carousel_slots:[]};return e.forEach(e=>{const n={};n.description=e.details||"",n.title=e.title||"",n.link=e.link||"",t.carousel_slots.push(n)}),t}}return null}),re(this,"triggerBoardAndSectionCreate",e=>()=>{const{board:t,sectionId:n,sectionName:r}=this.state;!t.id&&t.name?this.createBoard(e):!n&&r?this.createSection():this.handleSave()}),re(this,"handleSave",()=>{this.setState({isProcessing:!0});const{advertiser_id:e,pinId:t,pinResource:{data:n},invalidatePinResource:r,completeResourceFetch:i,onHide:a}=this.props;if(!n)return;const{board:o,comments_disabled:s,did_it_disabled:c,title:l,description:d,link:u,section:h,carousel_data:p}=n,{carousel_data:g,shouldShowValidationLinkFormatError:f}=this.state;let b;if(g){const e=this.sanitizeCarouselData();e&&(b=JSON.stringify(e))}const{board:_,commentsDisabled:y,currentIndex:I,photosDisabled:S,title:w,description:v,sectionId:C,carousel_data:x}=this.state,O=_||o,k=f?u:this.state.link,R={board_id:O.id,board_section_id:C,carousel_data_json:b,description:v,disable_comments:y,disable_did_it:S,id:t,link:k,title:w,...e?{advertiser_id:e}:{}},T=h&&h.id||null,D=O.id,B=o.id,P=B!==D,M=(Boolean(T)||Boolean(C))&&T!==C,N=ae(l,w),L=ae(d,v),A=ae(u,k),j=Boolean(x)&&Boolean(p)&&!E()(x,p);P||M||N||L||A||j||(s!==y||c!==S)?m.a.create("PinResource",R).callUpdate().then(({resource_response:e})=>{if(this._isMounted){const{changeBoardPinCount:t,onSubmit:n,pinId:o,pinMoved:s,view:c,viewParameter:l}=this.props;(P||M)&&D&&B&&(s({selectedPinIds:[o],source:{boardId:B,sectionId:T},target:{boardId:D,sectionId:C}}),t({boardId:D,sectionId:C||void 0,increment:1}),t({boardId:B,sectionId:T||void 0,increment:-1})),n&&D&&O.url&&n({boardId:D,title:O.name,sectionId:C,url:O.url}),a(),r(o);const{data:u}=e;u.carousel_data&&(u.carousel_data.index=I),i(u);const h={};h.objectId=o,P&&(h.board_was_modified=!0),!P&&M&&(h.board_section_was_modified=!0),L&&(h.original_pin_description=d,h.edited_pin_description=v),j&&(h.original_carousel_data=JSON.stringify(this.sanitizeCarouselData(p)),h.edited_carousel_data=JSON.stringify(this.sanitizeCarouselData(x))),Object(W.a)(2,{component:208,view:c,viewParameter:l,...h})}}).catch(()=>{const{shouldShowValidationTitleError:e,shouldShowValidationDescriptionError:t,shouldShowValidationLinkFormatError:n}=this.state;this.setState({isProcessing:!1,shouldShowGenericUpdateError:!e&&!t&&!n})}):(a(),r(t)),this.setState({isProcessing:!1})}),re(this,"handleTextChanges",(e,t)=>{const{carousel_data:n}=this.state;if(!n)return;const r=d()(n),{carousel_slots:i=[]}=r,{currentIndex:a,shouldApplyTextToAll:o,description:s,link:c,title:l}=this.state,u=this.valueIsValidForType(e,t);switch(o?i.forEach(n=>n[t]=e):i[a]&&(i[a][t]=e),t){case"details":const t=0===a?e:s;this.setState({description:t,carousel_data:r||null,shouldShowValidationDescriptionError:!u,shouldShowGenericUpdateError:!1});break;case"link":const n=0===a?e:c;this.setState({link:n,carousel_data:r||null,shouldShowValidationLinkFormatError:!u,shouldShowGenericUpdateError:!1});break;case"title":const i=0===a?e:l;this.setState({title:i,carousel_data:r||null,shouldShowValidationTitleError:!u,shouldShowGenericUpdateError:!1})}}),re(this,"handleDescriptionChange",({value:e})=>{const t=this.valueIsValidForType(e,"description");this.setState({description:e,userNote:e,shouldShowValidationDescriptionError:!t,shouldShowGenericUpdateError:!1})}),re(this,"handleCarouselDetailsChange",({value:e})=>{this.handleTextChanges(e,"details")}),re(this,"handleTitleChange",({value:e})=>{const t=this.valueIsValidForType(e,"title");this.setState({title:e,shouldShowValidationTitleError:!t,shouldShowGenericUpdateError:!1})}),re(this,"handleCarouselTitleChange",({value:e})=>{this.handleTextChanges(e,"title")}),re(this,"valueIsValidForType",(e,t)=>{switch(t){case"details":case"description":return e.length<=500;case"link":return e.length>=0&&0===Object(te.q)([Object(te.p)({message:y.a._("Not a valid url.","Validation error for an improperly formated url","Validation error for an improperly formated url")})],e).length;case"title":return e.length<=100;default:return!0}}),re(this,"handleWebsiteChange",({value:e})=>{const t=this.valueIsValidForType(e,"link");this.setState({link:e,shouldDisableSave:!t,shouldShowValidationLinkFormatError:!t,shouldShowGenericUpdateError:!1})}),re(this,"handleCarouselWebsiteChange",({value:e})=>{this.handleTextChanges(e,"link")}),re(this,"handleCommentChange",e=>this.setState({commentsDisabled:!e.value})),re(this,"handlePhotoChange",e=>this.setState({photosDisabled:!e.value})),re(this,"handleShouldApplyToAll",e=>{if(e){const{currentIndex:t,carousel_data:n}=this.state;if(!n)return;const r=d()(n),{carousel_slots:i}=r,{details:a,link:o,title:s}=i[t];i.forEach(e=>{e.details=a,e.title=s,e.link=o}),this.setState({carousel_data:r,shouldApplyTextToAll:e})}else this.setState({shouldApplyTextToAll:e})}),re(this,"handleCarouselSlider",e=>{const{carousel_data:t}=this.state,n=t&&t.carousel_slots&&t.carousel_slots.length||1;e>=0&&e<n&&this.setState({currentIndex:e})}),re(this,"handleClickStoryPinPages",()=>{const{pinResource:{data:e},history:t}=this.props;e&&t.push(`/story-pin-builder/${e.id}/edit`)}),re(this,"handleMouseEnter",()=>{this.setState({shouldShowCarouselSliders:!0})}),re(this,"handleMouseLeave",()=>{this.setState({shouldShowCarouselSliders:!1})})}componentDidMount(){this._isMounted=!0,this.updateCarouselSlotIndex()}UNSAFE_componentWillReceiveProps(e){const{pinResource:{data:t,isLoaded:n},carouselSlotCurrentIndex:r}=e;t&&n!==this.props.pinResource.isLoaded&&this.setState({board:t.board,commentsDisabled:t.comments_disabled,description:t.description&&t.description.trim(),link:t.link,photosDisabled:t.did_it_disabled,sectionId:(t.section||{}).id,sectionName:(t.section||{}).title,title:t.title,userNote:t.unified_user_note,carousel_data:t.carousel_data,currentIndex:void 0!==r?r:t.carousel_data&&t.carousel_data.index||0,shouldApplyTextToAll:!1})}componentWillUnmount(){this._isMounted=!1}generateIndexIndicator(){const{currentIndex:e,carousel_data:t}=this.state,n=t&&t.carousel_slots&&t.carousel_slots.length||1;return n<2?"":i.a.createElement(x.c,{direction:"row",padding:2},i.a.createElement(x.q,{htmlFor:"CardsIndex"},i.a.createElement(x.K,{size:"md"},e+1,"/",n)))}render(){const{disableDelete:e,onHide:t,pinResource:n,pinId:r}=this.props,{apiErrorMessage:a,board:l,commentsDisabled:d,description:p,link:m,photosDisabled:g,sectionId:f,sectionName:b,showDeleteConfirmation:_,title:E,userNote:S,isProcessing:v,carousel_data:C,shouldApplyTextToAll:O,currentIndex:k,shouldDisableSave:T,shouldShowCarouselSliders:M,shouldShowValidationTitleError:L,shouldShowValidationDescriptionError:A,shouldShowValidationLinkFormatError:j,shouldShowGenericUpdateError:U}=this.state,Y=n.data||{},z=C&&C.carousel_slots&&C.carousel_slots.length>0&&C.carousel_slots[k]||{},{details:W="",link:Q="",title:X=""}=z;if(_)return i.a.createElement(R,{onDeletePin:this.handleDeletePin,onDismiss:this.onHideConfirmation});const $=!!(Y&&Y.story_pin_data_id&&Y.story_pin_data),ee=!!(C&&C.carousel_slots&&C.carousel_slots.length>1),te=Y&&(Y.access||[]).includes("write")||this.props.canEdit,ne=e=>te&&!Y.is_repin&&!(Y.aggregated_pin_data&&Y.aggregated_pin_data.is_shop_the_look)&&!$&&(ee||!C)&&(Y.native_creator&&Y.native_creator.id===e.id||ee&&Y.pinner&&Y.pinner.id===e.id||Y.link_domain&&Y.link_domain.official_user&&Y.link_domain.official_user.id===e.id||!!Y.domain&&Y.pinner&&Y.pinner.domain_url&&Y.pinner.domain_url.includes(Y.domain)),re=e=>!ne(e),ie=e=>re(e)?function(e){return e?y.a._("Note too long. Make sure all cards' notes have less than 500 characters","User note entered is too long while editing a carousel pin and/or one of its pins","User note entered is too long while editing a carousel pin and/or one of its pins"):y.a._("Note too long. Make sure note has less than 500 characters","User note entered is too long while editing a pin","User note entered is too long while editing a pin")}(ee):function(e){return e?y.a._("Description too long. Make sure all cards' descriptions have less than 500 characters","Description entered is too long while editing a carousel pin and/or one of its pins","Description entered is too long while editing a carousel pin and/or one of its pins"):y.a._("Description too long. Make sure description has less than 500 characters","Description entered is too long while editing a pin","Description entered is too long while editing a pin")}(ee),ae=e=>ee?W:re(e)?S:p,oe=Y&&Y.images&&Y.images["474x"]||{};return i.a.createElement(I.b,{heading:y.a._("Edit this Pin","Edit a previously saved pin","Edit a previously saved pin"),accessibilityModalLabel:y.a._("Edit your previously saved pin","Accessible label for edit previously saved pin modal","Accessible label for edit previously saved pin modal"),size:"lg",onDismiss:t,footer:i.a.createElement(x.c,{display:"flex",justifyContent:"between",marginStart:-1,marginEnd:-1},i.a.createElement(x.c,null,i.a.createElement(w.a,{id:"delete-pin-button"},i.a.createElement(x.d,{text:y.a._("Delete"),onClick:this.onClickDeleteButton,disabled:e}))),U&&i.a.createElement(x.c,{display:"flex",marginStart:2,marginTop:2,justifyContent:"center"},i.a.createElement(B.a,{errorMessage:a||y.a._("Sorry! There was an error editing your Pin.","Toast for pin edit error","Toast for pin edit error"),htmlFor:"pin-edit-generic-error"})),i.a.createElement(h.a,null,e=>i.a.createElement(x.c,{display:"flex",justifyContent:"between",marginStart:-2,marginEnd:-2},i.a.createElement(x.c,{paddingX:2},i.a.createElement(x.d,{text:y.a._("Cancel"),onClick:t})),i.a.createElement(x.c,{paddingX:2,"data-test-id":"edit-pin-save"},i.a.createElement(x.d,{text:y.a._("Save"),color:"red",onClick:this.triggerBoardAndSectionCreate(e),disabled:T})))))},!n.isLoaded||v?i.a.createElement(x.c,{paddingX:12,paddingY:9},i.a.createElement(x.G,{accessibilityLabel:y.a._("loading","Accessible label for the edit pin loading icon","Accessible label for the edit pin loading icon"),show:!0})):i.a.createElement(h.a,null,e=>i.a.createElement(x.c,{md:{display:"flex"},justifyContent:"between",minHeight:350,paddingX:4},i.a.createElement(x.c,{xs:{column:12},md:{column:9}},i.a.createElement(D,{board:l||Y.board,canEdit:te,onBoardChange:this.handleBoardChange,onBoardCreate:this.handleBoardCreateClick}),i.a.createElement(N,{board:l||Y.board,canEdit:te,currentSection:Y.section,onSectionChange:this.handleSectionChange,sectionId:f,sectionName:b,onSectionCreate:this.handleSectionCreateClick}),re(e)?null:i.a.createElement(H,{canEdit:te,onTitleChange:ee?this.handleCarouselTitleChange:this.handleTitleChange,title:ee?X:E,errorMessage:L?J(ee):""}),(Y.pinner||{}).id===e.id?i.a.createElement(P,{canEdit:te,description:ae(e)||"",errorMessage:A?ie(e):"",label:re(e)?y.a._("Note","Label for editing user note","Label for editing user note"):y.a._("Description","Label for editing description","Label for editing description"),placeholder:re(e)?y.a._("Write a note about this Pin...","Placeholder for editing user note","Placeholder for editing user note"):y.a._("Tell us about this Pin...","Placeholder for editing description","Placeholder for editing description"),onDescriptionChange:ee?this.handleCarouselDetailsChange:this.handleDescriptionChange}):null,ne(e)&&i.a.createElement(q,{link:ee?Q:m,onChangeWebsite:ee?this.handleCarouselWebsiteChange:this.handleWebsiteChange,errorMessage:j?Z(ee):""}),ee&&i.a.createElement(x.c,{display:"flex",justifyContent:"end",paddingX:4,paddingY:3,alignItems:"end"},i.a.createElement(x.c,{paddingY:2},i.a.createElement(x.q,{htmlFor:"applyTextToAll"},i.a.createElement(x.K,null,y.a._("Apply text to all","Apply title, description, link to all cards","Apply title, description, link to all cards")))),i.a.createElement(x.c,{paddingX:2,paddingY:2},i.a.createElement(x.I,{onChange:e=>this.handleShouldApplyToAll(e.value),id:"applyTextToAll",switched:O}))),i.a.createElement(G.a,{name:"web_pin_builder_story_pin",isEligible:$},({anyEnabled:t})=>{const{native_creator:n,story_pin_data:r}=Y;if(r){const a=n&&n.id===e.id,o=Object(V.a)(r.metadata.compatible_version,K.a);return $&&t&&a&&(0===o||-1===o)&&i.a.createElement(x.c,null,i.a.createElement(F,{onClick:this.handleClickStoryPinPages,storyPinData:r}))}return null}),Y.can_delete_did_it_and_comments&&i.a.createElement(u.a,{commentsDisabled:d,onCommentChange:this.handleCommentChange,onPhotoChange:this.handlePhotoChange,photosDisabled:g})),i.a.createElement(x.c,{paddingX:4,paddingY:3,justifyContent:"center",direction:"column"},ee?this.generateIndexIndicator():"",i.a.createElement(x.u,{width:236},i.a.createElement(x.c,{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},i.a.createElement(x.u,{rounding:2,wash:!0},ee&&M&&i.a.createElement(x.c,{width:"100%",height:"100%",display:"inlineBlock",position:"absolute",dangerouslySetInlineStyle:{__style:{zIndex:10,background:"rgba(0, 0, 0, 0.3)"}}},i.a.createElement(c.default,{handleCarouselSwipe:this.handleCarouselSlider,carouselIndex:k,carouselData:C,pinId:r,isEditMode:!0})),ee?i.a.createElement(o.a,{carouselIndex:k,isCloseup:!1,carouselData:C,pinId:r,isEditMode:!0}):i.a.createElement(x.p,{alt:p,color:"#efefef",naturalHeight:oe.height,src:oe.url,naturalWidth:oe.width})),ee&&i.a.createElement(s.default,{carouselIndex:k,carouselData:C,pinId:r,handleCarouselSwipe:this.handleCarouselSlider,isEditMode:!0,variant:"legacy"})))))))}})},"8cMa":function(e,t,n){var r=n("q1tI"),i=n("Ye/N"),a=n("n6mq");t.a=function({type:e}){const t={group:{accessibilityLabel:i.a._("group board","Board picker group board icon","Board picker group board icon"),icon:"people"},protected:{accessibilityLabel:i.a._("protected board","Board picker protected board icon","Board picker protected board icon"),icon:"lock"},secret:{accessibilityLabel:i.a._("secret board","Board picker secret board icon","Board picker secret board icon"),icon:"lock"},sections:{accessibilityLabel:i.a._("board with sections","Board picker board with sections icon","Board picker board with sections icon"),icon:"arrow-forward"},sectionsInline:{accessibilityLabel:i.a._("board with sections","Board picker board with sections icon","Board picker board with sections icon"),icon:"arrow-down"}}[e];return r.createElement(a.c,{marginStart:1},r.createElement(a.c,{marginStart:2},"sections"===e||"sectionsInline"===e?r.createElement(a.n,{accessibilityLabel:t.accessibilityLabel,icon:t.icon,size:"12",color:"darkGray"}):r.createElement(a.n,{accessibilityLabel:t.accessibilityLabel,icon:t.icon,size:16,color:"darkGray"})))}},"8mez":function(e,t,n){function r(e,t,n){return{type:"PIN_BUILDER_ADD_PIN_DRAFT",payload:{pinDraftId:e,pinDraft:t,options:n}}}n.d(t,"a",(function(){return r}))},"9QW3":function(e,t,n){n.d(t,"a",(function(){return o}));const r={row:0,section:0},i={row:-1,section:-1},a=()=>void 0;class o{constructor(e){this.index=Object.assign({},r),this.sections=e,this.updateCallback=a,this.selectItem=a}getIndex(){return this.index}isAtStart(){const{row:e,section:t}=this.index;return 0===e&&0===t}isAtEnd(){const{row:e,section:t}=this.index,n=this.sections[t]||[];return this.sections.length===t+1&&n.length===e+1}next(){if(this.isAtEnd())return;const{row:e,section:t}=this.index;e===i.row&&t===i.section?this.index=Object.assign({},r):this.sections[t].length>e+1?this.index.row+=1:(this.index.section+=1,this.index.row=0),this.updateCallback(!0)}prev(){if(this.isAtStart())return;const{row:e,section:t}=this.index;if(e===i.row&&t===i.section)this.index=Object.assign({},r);else if(e>0)this.index.row-=1;else{const e=this.index.section-1;this.index={section:e,row:this.sections[e].length-1}}this.updateCallback(!0)}select(){const{row:e,section:t}=this.index;this.selectItem((this.sections[t]||[])[e])}setInactive(){this.index=Object.assign({},i),this.updateCallback()}setSelectItem(e){this.selectItem=e}setUpdateCallback(e){this.updateCallback=e}updateIndex(e){this.index=e,this.updateCallback()}}},GBVV:function(e,t,n){n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s}));var r=n("q1tI"),i=n("n6mq");const a={__style:{margin:"0 10px",borderRight:"3px solid transparent",borderTop:"3px solid #fff",animation:"spin .8s linear infinite"}};function o(){return r.createElement(i.c,{alignItems:"center",color:"red",display:"flex",height:"100%",justifyContent:"center",position:"absolute",width:"100%",rounding:8},r.createElement(i.c,{dangerouslySetInlineStyle:a,display:"inlineBlock",height:18,position:"relative",rounding:"circle",width:18}))}function s({accessibilityExpanded:e,accessibilityHaspopup:t,accessibilityLabel:n,disabled:a,name:s,onClick:c,selected:l,size:d,submitting:u,text:h,textColor:p}){return r.createElement(i.c,{display:"flex",position:"relative"},u&&r.createElement(o,null),r.createElement(i.d,{accessibilityExpanded:e,accessibilityHaspopup:t,accessibilityLabel:n,color:"red",disabled:a||u,inline:!0,name:s,onClick:c,selected:l,size:d,textColor:p,type:"submit",text:h}))}},IBrh:function(e,t,n){n.d(t,"a",(function(){return l}));var r=n("q1tI"),i=n("i8i4"),a=n.n(i),o=n("mEMi"),s=(n("9QW3"),n("n6mq"));function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class l extends r.Component{constructor(e,t){super(e,t),c(this,"setSelectedItemRef",e=>{this.selectedItemRef=e}),c(this,"handleIndexUpdate",e=>{const{indexManager:t}=this.props;this.setState({selectedIndex:t.getIndex(),selectionMovedByKeyboard:!!e})}),c(this,"handleSelectItem",e=>()=>{const{disabled:t,onSelectItem:n}=this.props;t||n(e)}),c(this,"handleMouseEnter",e=>({event:t})=>{const{disabled:n,indexManager:r}=this.props;n||r.updateIndex(e)}),c(this,"handleMouseLeave",({event:e})=>{const{disabled:t,indexManager:n}=this.props;t||n.setInactive()}),c(this,"renderItems",(e,t)=>{const{renderItem:n}=this.props,{selectedIndex:i}=this.state,{row:a,section:o}=i||{},{customProps:c={},items:l,renderItem:d}=e,{isDisabled:u=(e=>!1)}=c,h=t===o,p=d||n;return p&&l.map((e,n)=>{const i=u(e),o={section:t,row:n},l=h&&n===a;return r.createElement("div",{"data-test-id":"board-selection",key:n,ref:!i&&l&&this.setSelectedItemRef},i?p({item:e,hovered:l,sectionProps:c}):r.createElement(s.P,{onMouseEnter:this.handleMouseEnter(o),onMouseLeave:this.handleMouseLeave,onTouch:this.handleSelectItem(e),fullWidth:!1,rounding:2},p({item:e,hovered:l,sectionProps:c})))})}),c(this,"renderSections",()=>{const{renderSectionHeader:e,sections:t}=this.props;return t.map((t,n)=>r.createElement(s.c,{key:n},e&&e(t,n),this.renderItems(t,n)))});const{indexManager:n}=this.props;this.state={selectedIndex:n.getIndex(),selectionMovedByKeyboard:!1},n.setUpdateCallback(this.handleIndexUpdate)}componentDidUpdate(e){const{containerRef:t}=this;if(this.selectedItemRef&&this.state.selectionMovedByKeyboard&&t){const e=a.a.findDOMNode(this.selectedItemRef);if(!(e instanceof HTMLElement))return;const n=e.getBoundingClientRect(),r=n.top,i=n.bottom,o=t.getBoundingClientRect(),s=o.top;i>=o.bottom?e.scrollIntoView(!1):r<=s&&e.scrollIntoView(!0)}e.indexManager!==this.props.indexManager&&this.props.indexManager.setUpdateCallback(this.handleIndexUpdate)}render(){const{grow:e=!1,maxHeight:t,fetchMore:n}=this.props;return r.createElement(o.a,{fetchMore:n},({setRef:n,onScroll:i})=>r.createElement(s.c,{flex:e?"grow":void 0,height:e?"100%":void 0,maxHeight:t,onScroll:i,overflow:"auto",ref:e=>{this.containerRef=e,n(e)}},this.renderSections()))}}},LeWa:function(e,t,n){n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return o}));n("q1tI");var r=n("QkVN"),i=n.n(r);const a={text:"",srcUrl:"",canonicalUrl:"",imageSignature:"",imageUrl:"",isFetching:!1},o={backgroundColor:"#ffffff",blockIds:[],canvasJson:null,description:"",descriptionError:null,dominantColors:[],layout:null,linkBlock:a,linkError:null,media:null,selectedBlockId:null,signals:{},title:"",titleError:null};t.a=(e=o,t)=>{switch(t.type){case"PIN_DRAFT_ADD_STORY_PIN_ITEM":case"STORY_PIN_ITEM_UPDATE_DATA":{const{pinItem:n}=t.payload;return{...e,...n}}case"STORY_PIN_ITEM_SET_DESCRIPTION":{const{description:n}=t.payload;return{...e,description:n}}case"STORY_PIN_ITEM_SET_DESCRIPTION_ERROR":{const{descriptionError:n}=t.payload;return{...e,descriptionError:n}}case"STORY_PIN_ITEM_UPDATE_LINK_BLOCK":{const{linkBlock:n}=t.payload;return{...e,linkBlock:{...e.linkBlock,...n}}}case"STORY_PIN_ITEM_SET_LINK_ERROR":{const{linkError:n}=t.payload;return{...e,linkError:n}}case"STORY_PIN_ITEM_SET_MEDIA":{const{media:n}=t.payload;return{...e,media:n,canvasJson:null}}case"STORY_PIN_ITEM_UPDATE_MEDIA":{const{media:n}=t.payload;return{...e,media:e.media?i()({},e.media,n):null}}case"STORY_PIN_ITEM_SET_TITLE":{const{title:n}=t.payload;return{...e,title:n}}case"STORY_PIN_ITEM_SET_TITLE_ERROR":{const{titleError:n}=t.payload;return{...e,titleError:n}}case"STORY_PIN_ITEM_SET_EDITED_IMAGE":{const{editedMedia:n,canvasJson:r}=t.payload;return{...e,media:n,canvasJson:r}}case"STORY_PIN_ITEM_SET_SELECTED_BLOCK_ID":{const{blockId:n}=t.payload;return{...e,selectedBlockId:n}}case"STORY_PIN_ITEM_SET_BACKGROUND_COLOR":{const{backgroundColor:n}=t.payload;return{...e,backgroundColor:n}}case"STORY_PIN_ITEM_SET_LAYOUT":{const{layout:n}=t.payload;return{...e,layout:n}}case"STORY_PIN_ITEM_SET_DOMINANT_COLORS":{const{dominantColors:n}=t.payload;return{...e,dominantColors:n}}case"STORY_PIN_ITEM_ADD_BLOCK":{const{blockId:n}=t.payload,{blockIds:r}=e;return{...e,blockIds:[...r,n]}}case"STORY_PIN_ITEM_REMOVE_BLOCK":{const{blockId:n}=t.payload,{blockIds:r}=e;return{...e,blockIds:[...r.filter(e=>e!==n)]}}default:return e}}},MfYO:function(e,t,n){n.d(t,"b",(function(){return r})),n.d(t,"e",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"f",(function(){return s})),n.d(t,"l",(function(){return c})),n.d(t,"g",(function(){return l})),n.d(t,"h",(function(){return d})),n.d(t,"k",(function(){return u})),n.d(t,"j",(function(){return h})),n.d(t,"i",(function(){return p})),n.d(t,"a",(function(){return m}));const r=20,i=375,a=i-40,o=665,s=72,c=40,l=10,d=28,u=c+2*l,h=s/4,p=840,m=`${i}px 128px`},MhBu:function(e,t,n){function r(e){return{type:"FEED_ITEMS_REMOVED",payload:e}}n.d(t,"a",(function(){return r}))},NXrh:function(e,t,n){n.d(t,"a",(function(){return _}));var r=n("q1tI"),i=n.n(r),a=n("/MKj"),o=n("Sihc"),s=n("Ye/N"),c=n("rrvb"),l=n("fArA"),d=n("0BOE"),u=n("jdx6"),h=n("qyR9"),p=n("zLLH"),m=n("n6mq");function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const f="NO_SECTION_VALUE";function b({section:e,hovered:t,searchQuery:n}){return i.a.createElement(m.c,null,i.a.createElement(m.c,{color:t?"lightGray":"white",display:"flex",padding:2,rounding:2},i.a.createElement(m.c,{flex:"grow"},i.a.createElement(m.K,{weight:"bold"},Object(u.b)(n,e.title)))),e.id===f&&i.a.createElement(m.j,null))}const _=class extends r.Component{constructor(...e){super(...e),g(this,"state",{searchQuery:""}),g(this,"getPickerSections",()=>{const{searchQuery:e}=this.state,{sectionsResource:t,mergingFromSectionId:n}=this.props;let r=t&&t.data||[];return r=n?r.filter(e=>e.id!==n):[{id:f,title:s.a._("No section","default dropdown option for selecting a board section on pin edit","default dropdown option for selecting a board section on pin edit")},...r],e.length>=h.a&&(r=Object(d.a)(r,e,"title")),[{items:r}]}),g(this,"createBtnDisabled",()=>{const{sectionsResource:e}=this.props,{searchQuery:t}=this.state;return!(!e||!e.data)&&e.data.some(e=>e.title.toLowerCase()===t.toLocaleLowerCase())}),g(this,"handleSectionCreate",()=>{const{board:e,onSectionChange:t,sectionsResource:n,dispatch:r,onSectionCreate:i}=this.props,{searchQuery:a}=this.state;i?i(a):r&&e.id&&r(Object(o.a)({boardId:e.id,name:a})).then(e=>{n&&n.refreshData(),this.setState({searchQuery:""}),t(e)})}),g(this,"handleSectionSelected",e=>{const{onSectionChange:t}=this.props;e.id===f?(t(null),this.setState({searchQuery:""})):(t(e),this.setState({searchQuery:""}))}),g(this,"handleSearchQueryUpdate",e=>{this.setState({searchQuery:e})}),g(this,"renderRow",({item:e,hovered:t})=>{const{searchQuery:n}=this.state;return i.a.createElement(b,{section:e,hovered:t,searchQuery:n})})}componentDidUpdate(e){const t=e.selectedSectionId,{selectedSectionId:n}=this.props;if(n!==t){const{sectionsResource:e}=this.props;e&&e.refreshData()}}render(){const{sectionsResource:e,selectedSectionId:t,mergingFromSectionId:n,selectedSectionName:r}=this.props,{searchQuery:a}=this.state;let o=n?s.a._("Pick a section","default dropdown option for selecting a board section to merge to","default dropdown option for selecting a board section to merge to"):s.a._("No section","default dropdown option for selecting a board section on pin edit","default dropdown option for selecting a board section on pin edit");if(t){let n;e&&e.data&&(n=e.data.find(e=>e.id===t)),o=n&&n.title||o}else r&&(o=r);return i.a.createElement(m.c,null,i.a.createElement(m.G,{accessibilityLabel:s.a._("loading section picker","accessibility text for loading spinner","accessibility text for loading spinner"),show:!!e&&!e.isLoaded}),(!e||e&&e.isLoaded)&&i.a.createElement(c.a,{dropdownValue:o,onCreate:n?null:this.handleSectionCreate,onSearchQueryUpdate:this.handleSearchQueryUpdate,onSelect:this.handleSectionSelected,renderRow:this.renderRow,searchQuery:a,sections:this.getPickerSections(),createBtnDisabled:this.createBtnDisabled()}))}};t.b=Object(l.compose)(Object(a.connect)(),Object(p.c)({name:"BoardSectionsRepinResource",key:"sectionsResource",options:e=>({board_id:e.board.id})},{allowStale:!1}))(_)},NdQN:function(e,t,n){var r=n("q1tI"),i=n.n(r),a=n("i8i4"),o=n.n(a),s=n("JW66"),c=n("Ye/N"),l=(n("9QW3"),n("n6mq"));t.a=class extends r.Component{constructor(...e){var t,n,r;super(...e),r=e=>{const{disabled:t,indexManager:n}=this.props;if(!t)switch(e.which){case s.a.KeyCode.ENTER:case s.a.KeyCode.NUMPAD_ENTER:e.preventDefault(),n.select();break;case s.a.KeyCode.UP:e.preventDefault(),n.prev();break;case s.a.KeyCode.DOWN:e.preventDefault(),n.next()}},(n="handleKeyDown")in(t=this)?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r}componentDidMount(){const e=this._input;if(e){const t=o.a.findDOMNode(e);if(t instanceof HTMLElement){const e=t.querySelector("input");e&&e.focus()}}}render(){const{onChange:e,value:t}=this.props;return i.a.createElement("div",{onKeyDown:this.handleKeyDown,style:{width:"100%"}},i.a.createElement(l.D,{accessibilityLabel:"",id:"pickerSearchField",onChange:({value:t})=>e(t),placeholder:c.a._("Search","search bar placeholder text","search bar placeholder text"),ref:e=>{this._input=e},size:"lg",value:t}))}}},NjDU:function(e,t,n){function r(e){return{type:"UPDATE_USER_PIN_COUNT",payload:e}}function i(e){return{type:"UPDATE_USER_FOLLOWING_COUNT",payload:e}}function a(e){return{type:"UPDATE_USER_SCHEDULED_PIN_COUNT",payload:e}}function o(e,t){return{type:"UPDATE_USER_SOCIAL_NETWORK",payload:{socialNetworkName:e,connected:t}}}n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return o}))},Pqnw:function(e,t,n){function r(e,t){return{type:"FEED_INVALIDATE",payload:{feedType:e,feedId:t}}}n.d(t,"a",(function(){return r}))},Q7uW:function(e,t,n){n.d(t,"a",(function(){return a}));var r=n("q1tI"),i=n("n6mq");function a(e){const{htmlFor:t,errorMessage:n}=e;return r.createElement(i.q,{htmlFor:t},r.createElement(i.c,{marginTop:1},r.createElement(i.K,{color:"red",size:"md"},n)))}},Sihc:function(e,t,n){n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return u}));var r=n("Pqnw"),i=n("uVIr"),a=n("VqlB"),o=n("eOdZ"),s=n("oN2T"),c=n("KFEb"),l=n("Wer7");function d(e,t){return{type:"SECTION_ADDED",payload:{boardId:e,section:t}}}function u({boardId:e,name:t,nameSource:n,pinImport:u,initialPinIds:h=[]}){let p=0;"RECOMMENDATION"===n?p=1:"EDITED_RECOMMENDATION"===n&&(p=2);const m={board_id:e,initial_pins:u&&!u.all?u.pinIds:h,name:t,name_source:p};return t=>o.a.create("BoardSectionResource",m).callCreate({showError:!1}).then(({resource_response:{data:n}})=>{t(d(e,n)),t(Object(i.a)({feedId:e,feedType:c.a.BOARD_SECTIONS,itemIds:[n.id],itemType:"board_section"})),t(Object(s.b)(e,"pin_count")),t(Object(l.f)("BoardSectionsRepinResource",{board_id:e}));const{all:o,pinIds:h}=u||{all:!1,pinIds:[]};return o?new Promise((r,i)=>t(Object(a.a)({inverseSelection:!0,selectedPinIds:h,source:{boardId:e,sectionId:null},target:{boardId:e,sectionId:n.id}})).then(()=>r(n)).catch(i)):(h.length>0&&t(Object(r.a)(c.a.BOARD_PINS,e)),n)})}},V711:function(e,t,n){var r=n("q1tI"),i=n.n(r),a=n("/MKj"),o=n("8cMa"),s=n("kwau"),c=n("JW66"),l=n("Ye/N"),d=n("rrvb"),u=n("zLLH"),h=n("0BOE"),p=n("jdx6"),m=n("Wer7"),g=n("qyR9"),f=n("n6mq"),b=n("fArA"),_=n("oN2T");function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y({board:e,hovered:t,searchQuery:n}){const r=e.privacy===c.a.BoardPrivacy.SECRET;return i.a.createElement(f.c,{color:t?"lightGray":"white",display:"flex",padding:2,rounding:2},i.a.createElement(f.c,{flex:"grow"},i.a.createElement(f.K,{weight:"bold"},Object(p.b)(n,e.name))),i.a.createElement(f.c,{display:"flex",flex:"none",direction:"row"},r&&i.a.createElement(o.a,{type:"secret"}),e.is_collaborative&&i.a.createElement(o.a,{type:"group"})))}t.a=Object(b.compose)(Object(a.connect)((function(e){const{advertiser:t,viewer:n}=e,r=n.isAuth&&t&&t.owner_user_id!==n.id;return{advertiser_id:r?t.id:null,username:r?t.owner_user_id:null}}),(function(e){return{invalidateBoardPickerBoardsResource:()=>{e(Object(m.f)("BoardPickerBoardsResource",{field_set_key:"board_picker"}))},createBoard:t=>e(Object(_.f)(t))}})),Object(u.c)({name:"BoardPickerBoardsResource",key:"boardResource",options:e=>({pin_id:e.pinId,field_set_key:"board_picker",onlyFetchBoards:!0,username:e.username,...e.advertiser_id&&e.username?{advertiser_id:e.advertiser_id,filter:"protected",username:e.username}:{}})},{allowStale:!1}))(class extends r.Component{constructor(e,t){super(e,t),E(this,"getSections",()=>{const{searchQuery:e}=this.state,{boardResource:{data:{all_boards:t}}}=this.props;return e.length>=g.a?[{items:Object(h.a)(t,e)}]:[{items:t}]}),E(this,"createBtnDisabled",()=>{const{boardResource:{data:{all_boards:e}}}=this.props,{searchQuery:t}=this.state;return e.some(e=>e.name.toLowerCase()===t.toLowerCase())}),E(this,"handleBoardCreate",e=>()=>{const{searchQuery:e}=this.state;if(!e)return;const{createBoard:t,invalidateBoardPickerBoardsResource:n,onBoardCreate:r}=this.props;n(),r?r(e):t({name:e,privacy:"public"}).then(e=>{const{onBoardChosen:t}=this.props;t(e)})}),E(this,"handleBoardSelected",e=>{this.props.onBoardChosen(e),this.setState({selectedBoard:e})}),E(this,"handleSearchQueryUpdate",e=>{this.setState({searchQuery:e})}),E(this,"renderRow",({item:e,hovered:t})=>{const{searchQuery:n}=this.state;return i.a.createElement(y,{board:e,hovered:t,searchQuery:n})}),this.state={searchQuery:"",selectedBoard:e.board}}render(){const{boardResource:e,board:t}=this.props,{searchQuery:n,selectedBoard:r}=this.state;let a=l.a._("Select a board","Label for selecting a board in Edit Pin Modal","Label for selecting a board in Edit Pin Modal");return t?a=t.name:r&&(a=r.name),i.a.createElement(f.c,null,i.a.createElement(f.G,{accessibilityLabel:l.a._("loading board picker","accessibility text for loading spinner","accessibility text for loading spinner"),show:!e.isLoaded}),e.data&&i.a.createElement(s.a,null,e=>i.a.createElement(d.a,{dropdownValue:a,onCreate:this.handleBoardCreate(e),onSearchQueryUpdate:this.handleSearchQueryUpdate,onSelect:this.handleBoardSelected,renderRow:this.renderRow,searchQuery:n,sections:this.getSections(),createBtnDisabled:this.createBtnDisabled()})))}})},VqlB:function(e,t,n){n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return m}));var r=n("3z7j"),i=n("Pqnw"),a=n("uVIr"),o=n("MhBu"),s=n("eOdZ"),c=n("oN2T"),l=n("KFEb"),d=n("gzTk");const u=e=>Object(i.a)(e.sectionId?l.a.SECTION_PINS:l.a.BOARD_PINS,e.sectionId||e.boardId);function h(e,t){const{source:n,target:i}=e;i.boardId!==n.boardId?(t(Object(c.b)(n.boardId,"pin_count")),t(Object(c.b)(i.boardId,"pin_count"))):n.sectionId&&i.sectionId||t(Object(c.b)(i.boardId,"pin_count")),n.sectionId&&t(Object(r.a)(n.sectionId)),i.sectionId&&t(Object(r.a)(i.sectionId))}function p(e){return t=>{const{selectedPinIds:n,source:r,target:i}=e;t(Object(o.a)({feedId:r.sectionId||r.boardId,feedType:r.sectionId?l.a.SECTION_PINS:l.a.BOARD_PINS,itemIds:n,itemType:"pin"})),t(Object(a.a)({feedId:i.sectionId||i.boardId,feedType:i.sectionId?l.a.SECTION_PINS:l.a.BOARD_PINS,itemIds:n,itemType:"pin"})),h(e,t)}}function m(e){return t=>(function(e,t){const{inverseSelection:n,selectedPinIds:r,source:i,target:c}=e;if(i.boardId===c.boardId&&(i.sectionId||null)===(c.sectionId||null))return Promise.reject();if(n){const e={board_id:i.boardId,new_board_id:c.boardId,old_section_id:i.sectionId||void 0,new_section_id:c.sectionId||void 0,pin_ids:r};return s.a.create("BulkEditSelectAllResource",e).callUpdate({showError:!1}).then(()=>Promise.all([t(u(i)),t(u(c))])).catch(d.a)}{const e=(e,n)=>{t(Object(o.a)({feedId:e.sectionId||e.boardId,feedType:e.sectionId?l.a.SECTION_PINS:l.a.BOARD_PINS,itemIds:r,itemType:"pin"})),t(Object(a.a)({feedId:n.sectionId||n.boardId,feedType:n.sectionId?l.a.SECTION_PINS:l.a.BOARD_PINS,itemIds:r,itemType:"pin"}))};e(i,c);const n=()=>e(c,i);if(c.boardId===i.boardId){if(c.sectionId){const e={section_id:c.sectionId,pins:r};return s.a.create("BoardSectionEditResource",e).callUpdate({showError:!1}).catch(e=>{n(),Object(d.a)(e)})}{const e={section_id:i.sectionId,pins:r};return s.a.create("BoardSectionPinsResource",e).callDelete({showError:!1}).catch(e=>{n(),Object(d.a)(e)})}}{const e={board_id:c.boardId,section_id:c.sectionId||void 0,pin_ids:r};return s.a.create("BulkEditResource",e).callUpdate({showError:!1}).catch(e=>{n(),Object(d.a)(e)})}}})(e,t).then(()=>h(e,t))}},Wrea:function(e,t,n){n.d(t,"e",(function(){return i})),n.d(t,"f",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var r=n("Wer7");const i=(e,t)=>n=>n(Object(r.a)("BoardResource",{board_id:e,field_set_key:t})),a=e=>i(e,"pin_count"),o=e=>({type:"BOARD_PIN_COUNT_CHANGED",payload:e}),s=e=>({type:"BOARD_INVITE_ACCEPTED_BY_VIEWER",payload:{boardId:e}}),c=(e,t)=>({type:"BOARD_COVER_IMAGE_UPDATED",payload:{boardId:e,coverPin:t}}),l=e=>({type:"BOARD_DISABLE_MORE_IDEAS_BADGING",payload:{boardId:e}})},X9vl:function(e,t,n){n.d(t,"a",(function(){return l}));var r=n("q1tI"),i=n("vgrb"),a=n("MfYO"),o=n("n6mq");const s={width:a.l,height:a.f},c={transition:Object(i.a)({property:"height",duration:"short",timingFunction:"easeOut"})};function l(e){const{index:t,pinItem:n}=e,{description:i,title:l}=n,d=0===t;return r.createElement(r.Fragment,null,r.createElement(o.c,{display:"flex",direction:"column",rounding:2,justifyContent:"center",width:a.l,height:a.f,overflow:"hidden",dangerouslySetInlineStyle:{__style:{backgroundColor:"black"}}},function(e){const{description:t,media:n,title:i}=e,{height:a,src:c,width:l,type:d}=n||{};if(!n)return null;if("localVideo"===d)return r.createElement(r.Fragment,null,r.createElement("video",{muted:!0,src:c,style:s},r.createElement("track",{kind:"captions"})));if(n&&"webVideo"===n.type){const{customCoverImg:e}=n||{};return r.createElement(o.p,{alt:i||t,color:"#FEFEFE",src:e&&e.src||"",naturalHeight:a,naturalWidth:l})}return r.createElement(o.p,{alt:i||t,color:"#FEFEFE",src:c,naturalHeight:a,naturalWidth:l})}(n)),r.createElement(o.c,{height:!l&&!i||d?0:a.j,color:"white",rounding:2,column:12,position:"absolute",bottom:!0,dangerouslySetInlineStyle:{__style:c}}))}},ZVWG:function(e,t,n){n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));const r=(e,t)=>{const n=/^\d{1,3}\.\d{1,3}(?:\.\d{1,6})?$/;if(!e.match(n)||!t.match(n))return null;const r=e.split("."),i=t.split("."),a=Math.max(r.length,i.length);for(let o=0;o<a;o+=1){const e=o<r.length?parseInt(r[o],10):0,t=o<i.length?parseInt(i[o],10):0;if(e<t)return-1;if(e>t)return 1}return 0};function i(e,t,n,r,i,a,o,s){const c=document.createElement("div");if("undefined"==typeof document||!document.body)return 0;document.body.appendChild(c);let l=t;const d={fontFamily:n,fontSize:`${l}px`,letterSpacing:`${i}px`,lineHeight:`${r}`,visibility:"hidden",width:`${o}px`};Object.assign(c.style,d);const u=document.createElement("div");for(u.style.display="inline",c.appendChild(u),e.forEach((t,n)=>{const r=document.createElement("span");r.style.wordBreak="break-word",s&&(r.style.padding=s),u.appendChild(r),r.appendChild(document.createTextNode(t)),n!==e.length-1&&r.appendChild(document.createElement("br"))});u.offsetHeight>a&&l>0;)l-=1,c.style.fontSize=`${l}px`;return u.remove(),c.remove(),l}},a9HN:function(e,t,n){n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return h}));var r=n("8mez"),i=n("qfnd"),a=n("xk4V"),o=n.n(a),s=n("q/rS"),c=n("LeWa");function l(e){if(e.image){const{height:t,url:n,width:r}=e.image.images["345x"]||e.image.images["236x"];return{height:t,src:n,width:r,id:o()(),signature:e.image_signature,type:"webImage"}}if(e.video&&e.video.video_list&&e.video.video_list.V_HLSV3_MOBILE){const{height:t,width:n,url:r,thumbnail:i}=e.video.video_list.V_HLSV3_MOBILE;return{id:o()(),width:n,height:t,src:r,customCoverImg:{src:i},type:"webVideo",signature:e.video_signature}}return null}function d(e){var t;if(!e||e.type!==s.a.LINK)return c.c;const{text:n="",src_url:r="",canonical_url:i="",normalized_url:a="",image:o,image_signature:l}=e;return{text:n,srcUrl:r,canonicalUrl:i,normalizedUrl:a,imageUrl:(null===(t=o.images.originals)||void 0===t?void 0:t.url)||o.images["345x"].url,imageSignature:l,isFetching:!1}}function u(e){const t=e.blocks.filter(e=>1===e.block_type)[0],n=e.blocks.filter(e=>0===e.block_type)[0],r=e.blocks.filter(e=>4===e.block_type)[0];return{...c.b,title:t&&t.text||"",description:n&&n.text||"",linkBlock:d(r),media:l(e)}}function h(e){return(t,n)=>{e&&e.story_pin_data&&t(function(e){return(t,n)=>{const{id:a,board:o,section:s,story_pin_data:c}=e,l={mode:"edit",selectedItem:{boardId:o.id,title:s?s.title:o.name,...s?{sectionId:s.id}:{}},type:"story",status:"saved",pinItemIds:[],pinItemIndex:0};t(Object(r.a)(a,l)),c&&c.pages.map(u).forEach((e,n)=>{t(Object(i.a)(a,n.toString(),e,{saveIndex:!0}))})}}(e))}}},"bo/h":function(e,t,n){n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));const r="0.4.0",i=".05em 0.2em"},c50B:function(e,t,n){n.d(t,"n",(function(){return i})),n.d(t,"d",(function(){return a})),n.d(t,"e",(function(){return o})),n.d(t,"a",(function(){return s})),n.d(t,"m",(function(){return c})),n.d(t,"i",(function(){return l})),n.d(t,"l",(function(){return d})),n.d(t,"p",(function(){return u})),n.d(t,"j",(function(){return h})),n.d(t,"f",(function(){return p})),n.d(t,"g",(function(){return m})),n.d(t,"h",(function(){return g})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return b})),n.d(t,"r",(function(){return _})),n.d(t,"o",(function(){return E})),n.d(t,"k",(function(){return y})),n.d(t,"q",(function(){return I})),n.d(t,"s",(function(){return S}));const r=e=>{const t={"０":"0","１":"1","２":"2","３":"3","４":"4","５":"5","６":"6","７":"7","８":"8","９":"9","　":" "},n=String(e).split("");return n.forEach((e,r)=>{const i=t[e];i&&(n[r]=i)}),n.join("")};function i(e){return function(t,n){const r=[];t&&/\S/.test(t)||r.push(e.message);const i={errors:r,warnings:[]};return n&&n(i),i}}const a=new RegExp(["(^[-!#$%&'*+/=?^_`{}|~0-9A-Z]+(\\.[-!#$%&'*+/=?^_`{}|~0-9A-Z]+)*",'|^"([\\001-\\010\\013\\014\\016-\\037!#-\\[\\]-\\177]|\\\\[\\001-\\011\\013\\014\\016-\\177])*"',")@((?:[A-Z0-9](?:[A-Z0-9-]{0,61}[A-Z0-9])?\\.)+[A-Z]{2,20}$)","|\\[(25[0-5]|2[0-4]\\d|[0-1]?\\d?\\d)(\\.(25[0-5]|2[0-4]\\d|[0-1]?\\d?\\d)){3}\\]$"].join(""),"i");function o(e){return function(t,n){const r=[];(t=t&&t.trim())&&!t.match(a)&&r.push(e.message);const i={errors:r,warnings:[]};return n&&n(i),i}}function s(e){return function(t,n){const i=r(t.trim()),a=[];i&&""!==i&&i.length<2&&a.push(e.ageTooShortString);const o=Math.floor(parseInt(i,10));""===i||/^\d+$/.test(i)&&o>0&&o<300||a.push(e.invalidAgeString);const s={errors:a,warnings:[]};return n&&n(s),s}}function c(e){return function(t,n){const r=(t=t&&t.trim()).replace(/[\(\)\+\-\. ]/g,""),i=[],a=!1!==e.checkLength&&r.length<7;!t||t.match(/^(\(?\+?[0-9]*\)?)?[0-9_\- \.\(\)]*$/g)&&!a||i.push(e.message);const o={errors:i,warnings:[]};return n&&n(o),o}}function l(e){return function(t,n){const i=/^\d+$/,a=[];"number"==typeof t||"string"==typeof t&&(t=t&&t.trim(),(t=r(t))&&!t.match(i)&&a.push(e.message));const o={errors:a,warnings:[]};return n&&n(o),o}}function d(e){return function(t,n){const i=/^[\d\ -]+$/,a=[];"number"==typeof t||"string"==typeof t&&(t=t&&t.trim(),(t=r(t))&&!t.match(i)&&a.push(e.message));const o={errors:a,warnings:[]};return n&&n(o),o}}function u(e){return function(t,n){const r=[];t&&!t.match(/^(https?:\/\/){0,1}[a-z0-9_\-]+\..+/gi)&&r.push(e.message);const i={errors:r,warnings:[]};return n&&n(i),i}}function h(e){return function(t,n){const r=[];(e.should_trim||!1)&&(t=t&&t.trim());const i=t.length;e.min&&i<e.min?r.push(e.minErrorString):e.max&&i>e.max&&r.push(e.maxErrorString);const a={errors:r,warnings:[]};return n&&n(a),a}}function p(e){return function(t,n){const r=[];t!==(e&&e.targetValue)&&r.push(e.message);const i={errors:r,warnings:[]};return n&&n(i),i}}function m(e){return function(t,n){t&&(t=parseFloat(t));const r=[];t<=e.value&&r.push(e.message);const i={errors:r,warnings:[]};return n&&n(i),i}}function g(e){return function(t,n){t&&(t=parseFloat(t));const r=[];t<e.value&&r.push(e.message);const i={errors:r,warnings:[]};return n&&n(i),i}}function f(e){return function(t,n){const r=[];/^[\040-\176]*$/.test(t)||r.push(e.message);const i={errors:r,warnings:[]};return n&&n(i),i}}function b(e){return function(t,n){const r=e.hasFractionalCents?/^\d*(\.\d\d?\d?)?$/:/^\d*(\.\d\d?)?$/,i=[];"number"==typeof t&&(t=t.toString()),t&&!t.match(r)&&(t=t&&t.trim(),i.push(e.message));const a={errors:i,warnings:[]};return n&&n(a),a}}function _(e){return function(t,n){t=t&&t.trim();const r=[],i=new Date(t);t&&!i.getTime()&&r.push(e.message);const a={errors:r,warnings:[]};return n&&n(a),a}}function E(e){return function(t,n){const r=[];(t=t&&t.trim())&&!t.match(/^([01]?[0-9]|2[0-3]):[0-5][0-9]$/)&&r.push(e.message);const i={errors:r,warnings:[]};return n&&n(i),i}}function y(e){return function(t,n){const r=[];e.pattern.test(t)||r.push(e.message);const i={errors:r,warnings:[]};return n&&n(i),i}}function I(e,t){const n=e.map(e=>e(t).errors);return[].concat(...n)}function S(e,t){let n="";return t.some(t=>{const r=t(e);return r.errors.length>0&&(n=r.errors[0],!0)}),n}},dtqy:function(e,t,n){var r=n("q1tI"),i=n.n(r),a=n("/MKj"),o=n("qWlA"),s=n("5S2N"),c=n("fArA"),l=n("7jH2"),d=n("U4JR");function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=Object(c.compose)(Object(a.connect)(({pins:e},{pinId:t,carouselSlotCurrentIndex:n})=>{const{carousel_data:r}=e&&t&&e[t]||{},{index:i}=r||{};return void 0!==n?{carouselSlotCurrentIndex:i||n||0}:{}}),(function(e){return class extends r.PureComponent{constructor(...e){super(...e),u(this,"state",{showEditModal:!1}),u(this,"onHide",()=>{this.setState({showEditModal:!1}),(this.props.onToggleModal||l.A)(!1)}),u(this,"handlePinEditButtonClick",Object(o.a)(e=>{e&&e.stopPropagation();const{component:t,onToggleModal:n}=this.props;(n||l.A)(!0),Object(d.a)(101,{element:3,...t?{component:t}:{}}),this.setState({showEditModal:!0})}))}render(){const{pinId:t,onDelete:n,onSubmit:a,carouselSlotCurrentIndex:o}=this.props,{showEditModal:c}=this.state,l={...this.props,handlePinEditButtonClick:this.handlePinEditButtonClick};return i.a.createElement(r.Fragment,null,i.a.createElement(e,l),c&&i.a.createElement(s.a,{carouselSlotCurrentIndex:o,onDelete:n,onHide:this.onHide,onSubmit:a,pinId:t}))}}}))},gONw:function(e,t,n){var r=n("q1tI"),i=n.n(r),a=n("n6mq");function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class s extends r.Component{constructor(...e){super(...e),o(this,"state",{isHovering:!1}),o(this,"onHover",()=>{this.setState({isHovering:!0})}),o(this,"offHover",()=>{this.setState({isHovering:!1})})}render(){const{name:e,selected:t,image:n,inFlyoutExp:r}=this.props;return r?i.a.createElement(a.c,{alignItems:"center",color:this.state.isHovering?"lightGray":"transparent",direction:"row",display:"flex",paddingX:4,paddingY:2,onMouseOver:this.onHover,onMouseOut:this.offHover},i.a.createElement(a.c,null,i.a.createElement(a.u,{height:40,width:40,rounding:2},this.state.isHovering&&n?i.a.createElement(a.p,{alt:"",color:"",fit:"cover",naturalHeight:n.height,naturalWidth:n.width,src:n.url}):i.a.createElement(a.c,{color:"lightGray",height:40,width:40}))),i.a.createElement(a.c,{padding:2},i.a.createElement(a.m,{size:"sm"},e))):i.a.createElement(a.c,{alignItems:"center",color:t?"lightGray":"transparent",direction:"row",display:"flex",paddingX:6,paddingY:2},i.a.createElement(a.c,null,i.a.createElement(a.n,{color:t?"darkGray":"gray",icon:"add",accessibilityLabel:""})),i.a.createElement(a.c,{marginStart:3},i.a.createElement(a.K,{color:t?"darkGray":"gray",weight:"bold"},e)))}}var c=n("Ye/N"),l=n("U4JR"),d=n("zLLH"),u=n("oTtT");function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const p=-1;class m extends r.Component{constructor(e){super(e),h(this,"_processSuggestions",e=>e&&e.length?e.map(e=>e.title):[]),h(this,"handleClick",e=>{const{suggestedBoardsNames:t}=this.state,{onBoardSelected:n}=this.props;n(t[e],!1),Object(l.a)(101,{component:13025,element:23})}),h(this,"handleMouseEnter",e=>{this.setState({selectedIndex:e})}),h(this,"handleMouseLeave",()=>{this.setState({selectedIndex:p})}),h(this,"renderSuggestionRow",(e,t)=>{const n=this.state.selectedIndex===t;return i.a.createElement("li",{key:t},i.a.createElement(a.P,{onTouch:()=>this.handleClick(t),onMouseEnter:()=>this.handleMouseEnter(t),onMouseLeave:this.handleMouseLeave},i.a.createElement(s,{selected:n,name:e,inFlyoutExp:this.props.inFlyoutExp,image:this.props.image})))}),this.state={selectedIndex:p,suggestedBoardsNames:this._processSuggestions(e.boards.data)}}UNSAFE_componentWillReceiveProps(e){this.setState({suggestedBoardsNames:this._processSuggestions(e.boards.data)})}componentDidUpdate(e){const{inFirstBoardCreateGestaltExp:t,boards:n,error:r,boardPickerStopwatch:i}=this.props;!e.boards.isLoaded&&n.isLoaded&&t&&i&&(r?i.error():i.stop())}renderGestaltBoardSuggestionList(){const{suggestedBoardsNames:e}=this.state;c.a._("Suggested board names","text above suggested board names list","text above suggested board names list");return i.a.createElement(a.c,null,i.a.createElement(a.c,{marginTop:5,marginStart:6,marginBottom:3},i.a.createElement(a.K,null,c.a._("Suggested board names"))),i.a.createElement("ul",null,e.map(this.renderSuggestionRow)))}renderPreviewBoardSuggestionList(){const{suggestedBoardsNames:e}=this.state;return i.a.createElement("div",null,i.a.createElement("ul",null,e.map(this.renderSuggestionRow)))}render(){const{inFirstBoardCreateGestaltExp:e,inFlyoutExp:t,minHeight:n,boards:r}=this.props,{suggestedBoardsNames:o}=this.state;return r.isLoaded?o&&o.length?t?this.renderPreviewBoardSuggestionList():e?this.renderGestaltBoardSuggestionList():i.a.createElement(a.c,null,i.a.createElement(a.c,{marginTop:2,paddingX:5},i.a.createElement(a.K,null,c.a._("Suggested board names"))),i.a.createElement("ul",null,o.map(this.renderSuggestionRow))):null:i.a.createElement(a.c,{alignItems:"center",display:"flex",height:"100%",justifyContent:"center",minHeight:n||""},i.a.createElement(a.G,{accessibilityLabel:c.a._("Loading board suggestions","Accesibility label for loading board suggestions","Accesibility label for loading board suggestions"),show:!0}))}}t.a=Object(d.c)({name:"BoardTitleSuggestionsResource",options:({pinId:e})=>({pin_id:e}),key:"boards"})((function(e){const t=Object(u.b)();return i.a.createElement(m,Object.assign({},e,{boardPickerStopwatch:t}))}))},gdcG:function(e,t,n){n.d(t,"a",(function(){return o}));var r=n("q1tI"),i=n.n(r),a=n("2WXK");function o(e){return function(t){const{isHovering:n,hoverHandlers:r}=Object(a.a)();return i.a.createElement(e,Object.assign({},t,{hoverHandlers:r,isHovering:n}))}}},gzTk:function(e,t,n){n.d(t,"a",(function(){return c}));var r=n("1inl"),i=n("Ye/N");const a=2171,o=2172,s=2173;function c(e){r.a.showError(function(e){switch(e.api_error_code){case a:case o:case s:return i.a._("Please wait until the previous board action finishes.");default:return e.message}}(e))}},jHGc:function(e,t,n){n.r(t),n.d(t,"PinRepEditButton",(function(){return c}));var r=n("q1tI"),i=n.n(r),a=n("Ye/N"),o=n("dtqy"),s=n("n6mq");function c({handlePinEditButtonClick:e,style:t,useLegoStyles:n=!1,usePersistentOneClickSaveStyles:r,wrappingIconStyle:o}){const c=i.a.createElement(s.o,{accessibilityLabel:a.a._("Edit","edit button on pin","edit button on pin"),bgColor:t&&t.bgColor||"white",icon:"edit",iconColor:t&&t.iconColor||"darkGray",onClick:({event:t})=>e(t),size:t&&t.size||"md"});return n||r?i.a.createElement("div",{style:{...o||{}}},c):c}t.default=Object(o.a)(c)},jdx6:function(e,t,n){n.d(t,"b",(function(){return c}));var r=n("q1tI"),i=n("8cMa"),a=n("JW66"),o=n("Ye/N"),s=n("n6mq");function c(e,t){const n=e&&e.length>1?new RegExp(e,"i"):"";return e&&e.length>1?t.split(n).reduce((n,i,a)=>{if(n.length>0&&e&&e.length){const o=t.toLowerCase().indexOf(e.toLowerCase());return n.concat(r.createElement("em",{key:a,style:{borderBottom:"1px solid #333",fontStyle:"normal",paddingBottom:"1px"}},t.substring(o,o+e.length)),i)}return[i]},[]):t}t.a=function(e){const{disabled:t,item:n,isSection:l,isSelectMode:d,isWithinSectionPicker:u,saveState:h,searchQuery:p,selected:m}=e,g=l?null:n,f=l?n:null,b=f&&f.title||g&&g.name||"";let _="",E=!1,y="",I=0;g&&({image_cover_url:_,is_collaborative:E,privacy:y,section_count:I=0}=g);const S=c(p,b),w=y===a.a.BoardPrivacy.SECRET,v=!t&&(m||!!h),C=!u&&I>0,x=I>0?"boardWithSection":"boardWithoutSection",O=d?o.a._("Select","Board select button label","Board select button label"):o.a._("Save","Pin save button label","Pin save button label");return r.createElement(s.c,{alignItems:"center",color:v?"lightGray":"white",display:"flex",paddingX:6,paddingY:2,"data-test-id":x},g?r.createElement(s.c,{height:36,width:36,color:"lightGray",overflow:"hidden",rounding:2,marginEnd:2,flex:"none"},_?r.createElement(s.p,{src:_,alt:b,fit:"cover",naturalWidth:1,naturalHeight:1}):r.createElement("span",null)):r.createElement(s.c,{paddingX:2}),r.createElement(s.c,{alignItems:"center",justifyContent:"between",display:"flex",flex:"grow"},r.createElement(s.K,{color:t?"gray":"darkGray",size:"md",truncate:!0,weight:"bold"},S),(C||!v)&&r.createElement(s.c,{alignItems:"center",display:"flex"},w&&r.createElement(i.a,{type:"secret"}),E&&r.createElement(i.a,{type:"group"}),C&&r.createElement(i.a,{type:"sections"})),!C&&v&&!h&&r.createElement(s.c,{alignItems:"center",color:"red","data-test-id":"BoardPickerSaveButton",display:"flex",flex:"none",paddingX:3,paddingY:2,rounding:4},!d&&r.createElement(s.c,{dangerouslySetInlineStyle:{__style:{marginRight:3,marginLeft:-6}}},r.createElement(s.n,{accessibilityLabel:"",color:"white",icon:"pin",inline:!0,size:20})),r.createElement(s.K,{color:"white",overflow:"normal",size:"md",weight:"bold"},O)),!C&&v&&"loading"===h&&r.createElement(s.c,{dangerouslySetInlineStyle:{__style:{transform:"scale(0.7)"}},maxHeight:35},r.createElement(s.G,{accessibilityLabel:o.a._("Saving","Accessibility label for saving a pin to a board","Accessibility label for saving a pin to a board"),show:!0}))))}},kwau:function(e,t,n){var r=n("/MKj");t.a=Object(r.connect)(({viewer:e})=>({viewer:e}))(({children:e,viewer:t})=>e(t))},mEMi:function(e,t,n){n.d(t,"a",(function(){return d}));var r=n("q1tI"),i=n.n(r),a=n("DzJC"),o=n.n(a);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const c=200,l=({scrollTop:e,clientHeight:t,scrollHeight:n},r)=>{return e+t+(r?r(t):2*t)>n};class d extends i.a.PureComponent{constructor(...e){super(...e),s(this,"setContainerRef",e=>{this.containerRef=e}),s(this,"fetchMoreIfNecessary",o()(()=>{const{fetchMore:e,scrollBuffer:t}=this.props;e&&this.containerRef&&l(this.containerRef,t)&&e()},c))}componentDidMount(){setTimeout(this.fetchMoreIfNecessary)}componentDidUpdate(){this.fetchMoreIfNecessary()}render(){const{children:e}=this.props;return e({onScroll:this.fetchMoreIfNecessary,setRef:this.setContainerRef})}}},oN2T:function(e,t,n){n.d(t,"b",(function(){return m})),n.d(t,"h",(function(){return g})),n.d(t,"f",(function(){return f})),n.d(t,"d",(function(){return b})),n.d(t,"l",(function(){return _})),n.d(t,"g",(function(){return y})),n.d(t,"c",(function(){return I})),n.d(t,"a",(function(){return S})),n.d(t,"k",(function(){return w})),n.d(t,"i",(function(){return v})),n.d(t,"j",(function(){return C})),n.d(t,"e",(function(){return x}));var r=n("4dcN"),i=n("Pqnw"),a=n("7w6Q"),o=n("eOdZ"),s=n("KFEb"),c=n("5FNA"),l=n("NjDU"),d=n("Wer7");const u="board_create",h="board_delete",p="board_edit";function m(e,t){return Object(d.a)("BoardResource",{board_id:e,field_set_key:t})}function g(){return(e,t)=>{const{viewer:n}=t();n.isAuth&&Object(c.b)(n.username).forEach(t=>{e(t)})}}function f(e){const t={...e};return n=>(n({type:"BOARD_CREATE",payload:{board:e}}),o.a.create("BoardResource",t).callCreate().then(e=>{r.a.trackEvent(u,"success");const i=e.resource_response.data;return i&&(n(g()),n(function(e={},t,n){return{type:"BOARD_CREATE_COMPLETE",payload:{options:e,board:t},error:n}}(t,i))),i}).catch(e=>{throw r.a.trackEvent(u,"error"),e}))}function b(e={},t,n){return{type:"BOARD_UPDATE_COMPLETE",payload:{options:e,board:t},error:n}}function _(e){return t=>{const n=void 0===e.collaborator_requests_enabled||null===e.collaborator_requests_enabled?{}:{collaborator_requests_enabled:e.collaborator_requests_enabled},i={board_id:e.id,name:e.name,description:e.description,category:e.category,event_date:e.event_date,event_start_date:e.event_start_date,privacy:e.privacy,collab_board_email:e.collab_board_email,collaborator_invites_enabled:e.collaborator_invites_enabled,allow_homefeed_recommendations:e.allow_homefeed_recommendations,...n};return t({type:"BOARD_UPDATE",payload:{boardUpdateOptions:i}}),o.a.create("BoardResource",i).callUpdate().then(n=>{r.a.trackEvent(p,"success");const a=n&&n.resource_response&&n.resource_response.data||e;t(b(i,a))}).catch(e=>{throw r.a.trackEvent(p,"error"),e})}}function E(e,t){return{type:"BOARD_DELETE_COMPLETE",payload:{boardId:e},error:t}}function y(e){return(t,n)=>{const i=n().boards.content[e],{pin_count:a}=i,{id:s}=i.owner;return t({type:"BOARD_DELETE",payload:{boardId:e}}),o.a.create("BoardResource",{board_id:e}).callDelete().then(()=>{r.a.trackEvent(h,"error"),t(E(e)),t(Object(l.b)({userId:s,increment:-a}))}).catch(e=>{throw r.a.trackEvent(h,"error"),e})}}function I(e){return{type:"BOARD_PIN_TO",payload:{board:e}}}function S(e){return t=>(t(function(e){return{type:"BOARD_ARCHIVED",payload:{boardId:e}}}(e)),o.a.create("BoardArchiveResource",{boardId:e}).callUpdate())}function w(e){return t=>(t(function(e){return{type:"BOARD_UNARCHIVED",payload:{boardId:e}}}(e)),o.a.create("BoardArchiveResource",{boardId:e}).callDelete())}function v(e,t){return n=>o.a.create("BoardsMergeResource",{source_board_id:e,target_board_id:t}).callUpdate().then(()=>Promise.all([n(E(e)),n(m(t,"pin_count")),n(Object(i.a)(s.a.BOARD_SECTIONS,t))]))}function C(e,t){return n=>o.a.create("SocialSearchCampaignResource",{boardId:e}).callGet().then(e=>{if(!e||!e.resource_response){return n({type:"SET_SOCIAL_SEASONAL_BOARD",payload:{isSocialSeasonalBoard:!1,socialHeaderBgImage:"",socialHeaderBgColor:"",textIconColor:""}})}const r=e.resource_response.data||{},i=(r.model||{}).custom_properties||{},{campaign_id:o="unknown"}=i,s=r.display_data||{},c={isSocialSeasonalBoard:!!r.display_data,socialHeaderBgImage:s.header_image,socialHeaderBgColor:s.header_background_color,textIconColor:s.text_icon_color};return a.default.increment(`web.seasonal_board.${o}.${t}.land`),n({type:"SET_SOCIAL_SEASONAL_BOARD",payload:c})})}function x(){return e=>{return e({type:"SET_SOCIAL_SEASONAL_BOARD",payload:{isSocialSeasonalBoard:!1,socialHeaderBgImage:"",socialHeaderBgColor:"",textIconColor:""}})}}},"q/rS":function(e,t,n){n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));const r={HEADING:"story_pin_heading_block",IMAGE:"story_pin_image_block",INGREDIENT:"story_pin_ingredient_block",LINK:"story_pin_link_block",PARAGRAPH:"story_pin_paragraph_block",SUPPLY:"story_pin_supply_block",VIDEO:"story_pin_video_block"},i={alignment:1,hex_color:"#111111",highlight_color:"#FFFFFF",vertical_alignment:1},a={...i,font:{default_size:28,letter_spacing:-.4,line_height:1.25,name:"Graphik Regular",url:"https://pinterest-taipei.s3.amazonaws.com/Graphik-Regular.otf"},font_size:28}},qfnd:function(e,t,n){function r(e,t,n,r){return{type:"PIN_DRAFT_ADD_STORY_PIN_ITEM",payload:{pinDraftId:e,pinItemId:t,pinItem:n,options:r}}}n.d(t,"a",(function(){return r}))},qyR9:function(e,t,n){var r=n("q1tI"),i=n.n(r),a=n("jdx6"),o=n("gONw"),s=n("Ye/N"),c=n("gdcG"),l=n("n6mq");var d=Object(c.a)((function(e){const{buttonLabel:t,isHovering:n,isRowItem:i,hasHoverState:a,hoverHandlers:o,name:c,onClick:d}=e,u=c||t||s.a._("Create board");return r.createElement(l.P,{onMouseEnter:o.onMouseOver,onMouseLeave:o.onMouseLeave,onTouch:d},r.createElement(l.c,{alignItems:"center",color:a&&n?"lightGray":"white",display:"flex",flex:i?"shrink":"none",height:64,width:"100%"},r.createElement(l.c,{marginStart:6,marginEnd:3,"data-test-id":"createBoardButton"},r.createElement(l.n,{accessibilityLabel:s.a._("Add a board"),size:"32",icon:"add-circle",color:"red"})),c?r.createElement(l.c,{margin:1},r.createElement(l.K,{inline:!0,overflow:"normal"}," ",s.a._("Create: ")," ")):null,r.createElement(l.K,{align:"center",inline:!0,truncate:!0,weight:"bold"}," ",u," ")))})),u=n("9QW3"),h=n("NdQN"),p=n("IBrh"),m=n("oTtT");function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return E}));const f="",b=2;class _ extends r.Component{constructor(...e){super(...e),g(this,"state",{searchQuery:f}),g(this,"handleSelectItem",e=>{const{onCreate:t,onSelected:n}=this.props;if(!e&&t){const{searchQuery:e}=this.state;t(e)}else e&&n(e);(t||e)&&this.setState({searchQuery:""})}),g(this,"handleSearchQueryInput",e=>{this.setState({searchQuery:e})}),g(this,"renderSectionHeader",(e,t)=>e.title?i.a.createElement(l.c,null,t>0&&i.a.createElement(l.j,null),i.a.createElement(l.c,{paddingX:3,paddingY:1},i.a.createElement(l.K,{size:"md"},e.title))):null),g(this,"renderRow",({item:e,hovered:t,sectionProps:n={}})=>{const{boardSavedTo:r,isSelectMode:o,disabledRowId:s}=this.props,{searchQuery:c}=this.state,{inSectionSelection:l=!1}=n,d=r&&r.board===e.id?r&&r.state:null,u="board_section"===e.type;return i.a.createElement(a.a,{isSelectMode:o,disabled:e.id===s&&l,item:e,isSection:u,isWithinSectionPicker:l,saveState:d,searchQuery:c,selected:t})})}componentDidUpdate(e){if(!e.isLoaded&&this.props.isLoaded){const{boardPickerStopwatch:e,hasLoadError:t}=this.props;e&&(t?e.error():e.stop())}}render(){const{boardSavedTo:e,createButtonLabel:t,hasLowBoardCount:n,getSections:r,isLoaded:a,onCreate:c,pinId:m}=this.props;if(a){const{searchQuery:a}=this.state,s=r(a);return this.indexManager=new u.a(s.map(e=>e.items)),this.indexManager.setSelectItem(this.handleSelectItem),i.a.createElement(l.c,{minHeight:0,flex:"grow",height:"100%",overflow:"auto",display:"flex",direction:"column",dangerouslySetInlineStyle:{__style:{zIndex:0}}},!n&&i.a.createElement(l.c,null,i.a.createElement(l.c,{paddingX:3,marginBottom:4,marginTop:1},i.a.createElement(h.a,{disabled:!!e,indexManager:this.indexManager,onChange:this.handleSearchQueryInput,value:a})),i.a.createElement(l.j,null)),i.a.createElement(p.a,{disabled:!!e,grow:!n&&!a,indexManager:this.indexManager,onSelectItem:this.handleSelectItem,renderItem:this.renderRow,renderSectionHeader:this.renderSectionHeader,sections:s}),i.a.createElement(l.j,null),c&&i.a.createElement(d,{buttonLabel:t,hasHoverState:!0,name:a,onClick:()=>c(a)}),n&&m&&i.a.createElement(o.a,{onBoardSelected:c,pinId:m}))}return i.a.createElement(l.c,{paddingY:5},i.a.createElement(l.G,{accessibilityLabel:s.a._("loading section picker","accessibility label for the loading spinner the repin picker","accessibility label for the loading spinner the repin picker"),show:!0}))}}function E(e){const t=Object(m.b)();return i.a.createElement(_,Object.assign({},e,{boardPickerStopwatch:t}))}},rrvb:function(e,t,n){var r=n("q1tI"),i=n("Ye/N"),a=n("9QW3"),o=n("NdQN"),s=n("IBrh"),c=n("gdcG"),l=n("n6mq");function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=Object(c.a)(class extends r.Component{constructor(...e){super(...e),d(this,"state",{showFlyout:!1}),d(this,"setContainerRef",e=>{this.containerRef=e}),d(this,"handleCreate",()=>{this.hideFlyout();const{onCreate:e}=this.props;e&&e()}),d(this,"handleSelectItem",e=>{this.hideFlyout();const{onSelect:t,onCreate:n}=this.props;e?t(e):n&&n()}),d(this,"handleDropdownTouch",()=>{this.setState(e=>({showFlyout:!e.showFlyout}))}),d(this,"handleHideFlyout",e=>{this.containerRef&&e.target instanceof HTMLElement&&!this.containerRef.contains(e.target)&&this.hideFlyout()}),d(this,"hideFlyout",()=>{const{hoverHandlers:{onMouseLeave:e}}=this.props;e(),this.setState({showFlyout:!1})})}componentDidMount(){document.addEventListener("click",this.handleHideFlyout,{capture:!0})}componentWillUnmount(){document.removeEventListener("click",this.handleHideFlyout,{capture:!0})}render(){const{dropdownValue:e,fetchMore:t,hoverHandlers:{onMouseOver:n,onMouseLeave:c},isHovering:d,onCreate:u,onSearchQueryUpdate:h,renderRow:p,searchQuery:m,sections:g,createBtnDisabled:f}=this.props,{showFlyout:b}=this.state;this.indexManager=new a.a(g.map(e=>e.items)),this.indexManager.setSelectItem(this.handleSelectItem);const _=!m.trim()||!!f;return r.createElement("div",{ref:this.setContainerRef},r.createElement(l.P,{onMouseEnter:n,onMouseLeave:c,onTouch:this.handleDropdownTouch,fullWidth:!1,rounding:2},r.createElement(l.c,{alignItems:"center",color:d?"lightWash":"lightGray",direction:"row",display:"flex",flex:"grow",paddingX:4,paddingY:3,rounding:2},r.createElement(l.c,{display:"flex",flex:"grow"},r.createElement(l.K,{weight:"bold"},e)),r.createElement(l.n,{icon:"arrow-down",size:14,color:"darkGray",accessibilityLabel:""}))),b&&r.createElement(l.c,{position:"relative"},r.createElement(l.c,{rounding:2,color:"white",display:"flex",direction:"column",overflow:"hidden",position:"absolute",width:"100%",borderSize:"sm",dangerouslySetInlineStyle:{__style:{zIndex:1}}},r.createElement(l.c,null,r.createElement(l.c,{display:"flex",padding:2,marginStart:-1,marginEnd:-1},r.createElement(l.c,{display:"flex",flex:"grow",paddingX:1},r.createElement(o.a,{hideIcon:!0,indexManager:this.indexManager,onChange:h,value:m})),u&&r.createElement(l.c,{paddingX:1},r.createElement(l.d,{disabled:_,inline:!0,onClick:this.handleCreate,text:i.a._("Create","board or section dropdown create button","board or section dropdown create button")})))),r.createElement(s.a,{fetchMore:t,indexManager:this.indexManager,maxHeight:240,onSelectItem:this.handleSelectItem,renderItem:p,sections:g}))))}})},vgrb:function(e,t,n){n.d(t,"a",(function(){return a}));const r={instant:85,short:250,medium:420,semiLong:500,long:800},i={easeIn:"0.9, 0.025, 0.75, 0.625",easeOut:"0.25, 0.375, 0.1, 0.975",easeInOut:"0.66, 0.025, 0.33, 0.975",linear:"0.5, 0.5, 1.0, 1.0",spring:"1, 100, 17, 8"};function a({property:e,duration:t,timingFunction:n,delay:a}){const o=a?` ${a}ms`:"";return`${e} ${"number"==typeof t?`${t}ms`:`${r[t]}ms`} cubic-bezier(${i[n]})${o}`}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/js/pjs-19-069b4928d91e2e9c6710.mjs.map
